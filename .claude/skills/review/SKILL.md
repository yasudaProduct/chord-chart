---
name: review
description: コードレビューを実施。プルリクエストのレビュー、コード品質チェック、改善提案の際に使用。
---

# コードレビュースキル

ChordBook プロジェクトのコードレビューガイドラインです。

## レビュー観点

### 1. コード品質

#### TypeScript/React (フロントエンド)
- [ ] 型定義が適切か（`any` の使用を避ける）
- [ ] コンポーネントが適切に分割されているか
- [ ] `useEffect` の依存配列が正しいか
- [ ] 不要な再レンダリングがないか
- [ ] エラーハンドリングが適切か

#### C# (バックエンド)
- [ ] Clean Architecture の原則に従っているか
- [ ] 非同期処理に `CancellationToken` が含まれているか
- [ ] 依存性注入が適切に使用されているか
- [ ] 例外処理が適切か
- [ ] nullチェックが適切か

### 2. 設計・アーキテクチャ
- [ ] 単一責任の原則に従っているか
- [ ] 適切な抽象化レベルか
- [ ] 重複コードがないか
- [ ] 拡張性を考慮しているか

### 3. パフォーマンス
- [ ] N+1 クエリ問題がないか
- [ ] 不要なデータベースアクセスがないか
- [ ] メモリリークの可能性がないか
- [ ] 適切なキャッシングがされているか

### 4. テスト
- [ ] テストカバレッジは十分か
- [ ] エッジケースがテストされているか
- [ ] テストが独立しているか

### 5. ドキュメント
- [ ] 複雑なロジックにコメントがあるか
- [ ] API の変更がドキュメント化されているか

## レビューコメントの書き方

### カテゴリプレフィックス
```
[必須] - 修正が必要
[提案] - 改善提案（任意）
[質問] - 確認したい点
[称賛] - 良い実装への賞賛
```

### 例
```
[必須] この `any` 型を適切な型に変更してください。

[提案] このロジックは `useMemo` でメモ化するとパフォーマンスが向上します。

[質問] このエラーハンドリングで全てのケースがカバーされていますか？

[称賛] Clean Architecture の原則に沿った素晴らしい実装です！
```

## レビュー実施コマンド

### GitHub PR のレビュー
```bash
# PR の差分を確認
gh pr diff <PR番号>

# PR の詳細を確認
gh pr view <PR番号>

# レビューコメントを投稿
gh pr review <PR番号> --comment --body "レビューコメント"

# 承認
gh pr review <PR番号> --approve

# 変更要求
gh pr review <PR番号> --request-changes --body "変更理由"
```

## チェックリスト実行

レビュー時に以下を確認：

```bash
# フロントエンド
cd apps/frontend
pnpm lint
pnpm build

# バックエンド
cd apps/backend
dotnet build ChordBook.sln
dotnet test
```
